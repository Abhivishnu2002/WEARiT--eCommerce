<!DOCTYPE html><html lang="en">    <head>        <meta charset="UTF-8" />        <meta name="viewport" content="width=device-width, initial-scale=1.0" />        <title>WEARiT - Edit Category</title>        <link rel="preconnect" href="https://fonts.googleapis.com" />        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />        <link            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"            rel="stylesheet"        />        <link            href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css"            rel="stylesheet"        />        <link            rel="stylesheet"            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"        />        <link            rel="stylesheet"            href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.min.css"        />        <link rel="stylesheet" href="/css/admin-navbar.css" />        <link rel="stylesheet" href="/css/admin-category.css" />        <style>            body {                font-family: "Inter", sans-serif;                background-color: #f8f9fa;            }            .btn-primary {                background-color: #0d6efd;                border-color: #0d6efd;            }            .btn-primary:hover {                background-color: #0b5ed7;                border-color: #0a58ca;            }        </style>    </head>    <body>        <%- include('../partials/navbar', {activePage: 'categories'}) %>        <main class="admin-main">            <div class="admin-content">                <div class="mb-4">                    <h2 class="category-title">Edit Category</h2>                    <nav aria-label="breadcrumb">                        <ol class="breadcrumb">                            <li class="breadcrumb-item">                                <a                                    href="/admin/dashboard"                                    class="text-decoration-none"                                    >Dashboard</a                                >                            </li>                            <li class="breadcrumb-item">                                <a                                    href="/admin/category"                                    class="text-decoration-none"                                    >Categories</a                                >                            </li>                            <li                                class="breadcrumb-item active"                                aria-current="page"                            >                                Edit Category                            </li>                        </ol>                    </nav>                </div>                <% if (locals.success_msg && success_msg.length > 0) { %>                <div                    class="alert alert-success alert-dismissible fade show"                    role="alert"                >                    <%= success_msg %>                    <button                        type="button"                        class="btn-close"                        data-bs-dismiss="alert"                        aria-label="Close"                    ></button>                </div>                <% } %> <% if (locals.error_msg && error_msg.length > 0) { %>                <div                    class="alert alert-danger alert-dismissible fade show"                    role="alert"                >                    <%= error_msg %>                    <button                        type="button"                        class="btn-close"                        data-bs-dismiss="alert"                        aria-label="Close"                    ></button>                </div>                <% } %>                <div class="card form-card">                    <div class="card-body">                        <form                            action="/admin/editcategory/<%= category._id %>"                            method="POST"                            id="editCategoryForm"                        >                            <div class="form-section">                                <h3 class="form-section-title">                                    Basic Information                                </h3>                                <div class="mb-3">                                    <label for="categoryName" class="form-label"                                        >Category Name</label                                    >                                    <input                                        type="text"                                        class="form-control"                                        id="categoryName"                                        name="name"                                        placeholder="Enter category name"                                        value="<%= category.name %>"                                    />                                    <div class="form-text">                                        This name will be displayed to customers                                    </div>                                </div>                                <div class="mb-3">                                    <label for="description" class="form-label"                                        >Description</label                                    >                                    <textarea                                        class="form-control"                                        id="description"                                        name="description"                                        rows="4"                                        placeholder="Enter category description"                                    ><%= category.description %></textarea                                    >                                    <div class="form-text">                                        Provide a brief description of this                                        category                                    </div>                                </div>                            </div>                            <div class="form-section">                                <h3 class="form-section-title">                                    Offer Details                                </h3>                                <div class="row">                                    <div class="col-md-6 mb-3">                                        <label                                            for="categoryOffer"                                            class="form-label"                                            >Category Offer (%)                                            <i class="fas fa-info-circle text-muted ms-1" data-bs-toggle="tooltip"                                               title="Enter a percentage between 0 and 99. This offer will be applied to all products in this category."></i>                                        </label>                                        <input                                            type="number"                                            class="form-control"                                            id="categoryOffer"                                            name="offer"                                            min="0"                                            max="99"                                            step="1"                                            placeholder="Enter offer percentage (0-99)"                                            value="<%= category.offer || 0 %>"                                        />                                        <div class="invalid-feedback" id="categoryOffer-error"></div>                                        <div class="form-text">                                            Enter percentage value between 0 and 99                                        </div>                                    </div>                                    <div class="col-md-6 mb-3">                                        <label                                            for="maxRedeemable"                                            class="form-label"                                            >Max Redeemable Amount (â‚¹)</label                                        >                                        <input                                            type="number"                                            class="form-control"                                            id="maxRedeemable"                                            name="maxRedeemable"                                            min="0"                                            placeholder="Enter maximum redeemable amount"                                            value="<%= category.maxRedeemable || 0 %>"                                        />                                        <div class="form-text">                                            Maximum discount amount that can be                                            applied                                        </div>                                    </div>                                </div>                            </div>                            <div class="form-section">                                <h3 class="form-section-title">Status</h3>                                <div class="mb-3">                                    <div class="form-check form-check-inline">                                        <input class="form-check-input"                                        type="radio" name="isDeleted"                                        id="listed" value="false" <%=                                        category.isListed ? 'checked' : '' %> />                                        <label                                            class="form-check-label"                                            for="listed"                                            >Listed</label                                        >                                    </div>                                    <div class="form-check form-check-inline">                                        <input class="form-check-input"                                        type="radio" name="isDeleted"                                        id="unlisted" value="true" <%=                                        !category.isListed ? 'checked' : '' %>                                        />                                        <label                                            class="form-check-label"                                            for="unlisted"                                            >Unlisted</label                                        >                                    </div>                                    <div class="form-text">                                        Listed categories are visible to                                        customers                                    </div>                                </div>                            </div>                            <div class="form-actions">                                <a                                    href="/admin/category"                                    class="btn btn-outline-secondary"                                    >Cancel</a                                >                                <button type="submit" class="btn btn-primary">                                    <i class="fas fa-save me-2"></i> Update                                    Category                                </button>                            </div>                        </form>                    </div>                </div>            </div>        </main>        <style>            .invalid-feedback {                display: none;                width: 100%;                margin-top: 0.25rem;                font-size: 0.875rem;                color: #dc3545;            }            .invalid-feedback.d-block {                display: block !important;            }            .form-control.is-invalid {                border-color: #dc3545;                padding-right: calc(1.5em + 0.75rem);                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 12 12' width='12' height='12' fill='none' stroke='%23dc3545'%3e%3ccircle cx='6' cy='6' r='4.5'/%3e%3cpath d='m5.8 4.6 1.4 1.4M7.2 4.6l-1.4 1.4'/%3e%3c/svg%3e");                background-repeat: no-repeat;                background-position: right calc(0.375em + 0.1875rem) center;                background-size: calc(0.75em + 0.375rem) calc(0.75em + 0.375rem);            }            .form-control.is-invalid:focus {                border-color: #dc3545;                box-shadow: 0 0 0 0.25rem rgba(220, 53, 69, 0.25);            }        </style>        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>        <script src="/js/admin-navbar.js"></script>        <script src="/js/admin-category.js"></script>        <script>            document.addEventListener("DOMContentLoaded", function () {                if (typeof locals !== "undefined" && locals.success_msg && success_msg.length > 0) {                    Swal.fire({                        icon: "success",                        title: "Success",                        text: success_msg,                        confirmButtonColor: "#0d6efd",                    });                }                if (typeof locals !== "undefined" && locals.error_msg && error_msg.length > 0) {                    Swal.fire({                        icon: "error",                        title: "Error",                        text: error_msg,                        confirmButtonColor: "#0d6efd",                    });                }                const form = document.getElementById("editCategoryForm");                if (form) {                    form.addEventListener("submit", function (e) {                        const categoryName = document.getElementById("categoryName").value.trim();                        const description = document.getElementById("description").value.trim();                        if (!categoryName) {                            e.preventDefault();                            Swal.fire({                                icon: "error",                                title: "Validation Error",                                text: "Category name is required",                                confirmButtonColor: "#0d6efd",                            });                            return;                        }                        if (!description) {                            e.preventDefault();                            Swal.fire({                                icon: "error",                                title: "Validation Error",                                text: "Description is required",                                confirmButtonColor: "#0d6efd",                            });                            return;                        }                        const offer = document.getElementById("categoryOffer").value;                        const offerValue = parseInt(offer);                        if (offer !== "" && (isNaN(offerValue) || offerValue < 0 || offerValue > 99)) {                            e.preventDefault();                            Swal.fire({                                icon: "error",                                title: "Validation Error",                                text: "Offer percentage must be between 0 and 99",                                confirmButtonColor: "#0d6efd",                            });                            return;                        }                        const maxRedeemable = document.getElementById("maxRedeemable").value;                        if (offer && !maxRedeemable) {                            e.preventDefault();                            Swal.fire({                                icon: "error",                                title: "Validation Error",                                text: "Max redeemable amount is required when offer is provided",                                confirmButtonColor: "#0d6efd",                            });                        }                    });                }            });        </script>    </body></html>