<!DOCTYPE html><html lang="en">    <head>        <meta charset="UTF-8" />        <meta name="viewport" content="width=device-width, initial-scale=1.0" />        <title><%= product.name %> - WEARiT</title>        <link            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"            rel="stylesheet"        />        <link            rel="stylesheet"            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"        />        <link rel="stylesheet" href="/css/product-details.css" />        <link rel="stylesheet" href="/css/product-details-animation.css" />        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">    </head>    <body class="<%= user ? 'user-logged-in' : '' %>">        <%- include('../partials/header') %>        <div class="container product-container mt-4">            <div class="row">                <div class="col-md-1 d-none d-md-block">                    <div class="product-thumbnails">                        <% if(product.images && product.images.length > 0) { %>                        <% product.images.forEach((image, index) => { %>                        <div                            class="thumbnail <%= index === 0 ? 'active' : '' %>"                        >                            <img                                src="<%= image.url %>"                                alt="<%= product.name %> - View <%= index + 1 %>"                                class="img-fluid thumbnail-img"                                data-index="<%= index %>"                            />                        </div>                        <% }); %> <% } else { %>                        <div class="thumbnail active">                            <img                                src="/images/placeholder.jpg"                                alt="<%= product.name %>"                                class="img-fluid"                            />                        </div>                        <% } %>                    </div>                </div>                <div class="col-md-5">                    <div class="main-product-image img-magnifier-container">                        <img                            src="<%= product.images && product.images.length > 0 ?                (product.images.find(img => img.isMain) || product.images[0]).url :                '/images/placeholder.jpg' %>"                            alt="<%= product.name %>"                            class="img-fluid main-img"                            id="mainProductImage"                        />                    </div>                </div>                <div class="col-md-6">                    <div class="product-details">                        <h1 class="product-title"><%= product.name %></h1>                        <div class="product-rating">                            <div class="stars">                                <% for(let i = 1; i <= 5; i++) { %> <%                                if(product.ratings && i <=                                Math.floor(product.ratings.average)) { %>                                <i class="fas fa-star"></i>                                <% } else if(product.ratings && i - 0.5 <=                                product.ratings.average) { %>                                <i class="fas fa-star-half-alt"></i>                                <% } else { %>                                <i class="far fa-star"></i>                                <% } %> <% } %>                            </div>                            <span class="rating-count">                                <%= product.ratings ?                                product.ratings.average.toFixed(1) : '0.0' %>/5                                (<%= product.ratings ? product.ratings.count :                                '0' %> reviews)                            </span>                        </div>                        <div class="product-price">                            <% if(defaultVariant && defaultVariant.varientPrice                            > defaultVariant.salePrice) { %>                            <h2>                                <span class="sale-price"                                    >₹<%= defaultVariant.salePrice %></span                                >                                <span class="original-price"                                    >₹<%= defaultVariant.varientPrice %></span                                >                                <span class="discount-percentage">                                    (<%= Math.round((defaultVariant.varientPrice                                    - defaultVariant.salePrice) /                                    defaultVariant.varientPrice * 100) %>% off)                                </span>                            </h2>                            <% } else if(defaultVariant) { %>                            <h2>₹<%= defaultVariant.salePrice %></h2>                            <% } else { %>                            <h2>Price unavailable</h2>                            <% } %>                        </div>                        <div class="stock-status">                            <% if(inStock) { %>                            <span class="in-stock">In Stock</span>                            <% } else { %>                            <span class="out-of-stock">Out of Stock</span>                            <% } %>                        </div>                        <div class="product-short-desc">                            <p><%= product.description %></p>                        </div>                        <% if(product.offer) { %>                        <div class="product-offers">                            <div class="offer-item">                                <div class="offer-badge">                                    <i class="far fa-clock"></i>                                </div>                                <div class="offer-details">                                    <p class="offer-title">                                        Get <%= product.offer %>% off                                    </p>                                    <p class="offer-desc">                                        Limited time offer. Use code:                                        <strong                                            >SPECIAL<%= product.offer %></strong                                        >                                    </p>                                </div>                            </div>                        </div>                        <% } %> <% if(product.variants && product.variants.length > 0) { %>                        <div class="size-selection">                            <p>Choose Size:</p>                            <div class="size-options">                                <% product.variants.forEach(variant => { %>                                <button                                    class="size-btn <%= variant.varientquatity === 0 ? 'out-of-stock' : '' %>"                                    data-size="<%= variant.size %>"                                    data-stock="<%= variant.varientquatity %>"                                >                                    <%= variant.size %>                                </button>                                <% }); %>                            </div>                        </div>                        <% } %> <% if(colorOption) { %>                        <div class="color-selection">                            <p>Color: <%= colorOption %></p>                        </div>                        <% } %>                        <div class="quantity-selection">                            <p>Quantity:</p>                            <div class="quantity-control">                                <button class="qty-btn" id="decrease-qty">                                    -                                </button>                                <input                                    type="number"                                    id="quantity"                                    value="1"                                    min="1"                                    max="<%= defaultVariant ? defaultVariant.varientquatity : 1 %>"                                    readonly                                />                                <button class="qty-btn" id="increase-qty">                                    +                                </button>                            </div>                        </div>                        <div class="cart-actions">                            <% if(inStock) { %>                            <button                                class="btn-add-to-cart"                                data-product-id="<%= product._id %>"                            >                                Add to Cart                            </button>                            <% } else { %>                            <button class="btn-add-to-cart disabled" disabled>                                Out of Stock                            </button>                            <% } %>                            <button                                class="btn-wishlist"                                data-product-id="<%= product._id %>"                                aria-label="<%= user ? 'Add to wishlist' : 'Login to add to wishlist' %>"                            >                                <i class="far fa-heart"></i>                            </button>                        </div>                        <div class="stock-status">                            <%                            const selectedVariant = product.variants.find(v => v.size === 'S') || product.variants[0];                            if(selectedVariant && selectedVariant.varientquatity > 0) { %>                                <span class="in-stock">In Stock</span>                            <% } else { %>                                <span class="out-of-stock">Out of Stock</span>                            <% } %>                        </div>                    </div>                </div>            </div>            <script>                window.productVariants = <%- JSON.stringify(product.variants || []) %>;            </script>        </div>        <%- include('../partials/footer') %>        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>        <script src="/js/image-magnifier.js"></script>        <script src="/js/product-details.js"></script>    </body></html>