<!DOCTYPE html><html lang="en"><head>  <meta charset="UTF-8" />  <meta name="viewport" content="width=device-width, initial-scale=1.0" />  <title>Checkout - WEARIT</title>  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" />  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />  <link rel="stylesheet" href="/css/style.css" />  <link rel="stylesheet" href="/css/header.css" />  <link rel="stylesheet" href="/css/footer.css" />  <link rel="stylesheet" href="/css/checkout.css" />  <link rel="stylesheet" href="/css/toast-notification.css" /></head><body class="checkout-page">  <%- include('../partials/header') %>  <main class="main-content">    <div class="container-fluid">      <div class="checkout-container">        <div class="container">          <div class="row">      <div class="col-lg-8">        <div class="checkout-content mb-4">          <div class="checkout-header">            <h2 class="checkout-title">              Select Delivery Address            </h2>          </div>          <% if (addresses && addresses.length > 0) { %>          <form id="checkout-form" action="/payment" method="GET">            <div class="row">              <% addresses.forEach(address => { %>              <div class="col-md-6 mb-3">                <div class="address-card <%= address.isDefault ? 'selected' : '' %>">                  <div class="form-check">                    <input class="form-check-input" type="radio" name="addressId" id="address<%= address._id %>" value="<%= address._id %>" <%=                                            address.isDefault ? 'checked' : ''                                            %>>                    <label class="form-check-label" for="address<%= address._id %>">                      <strong><%= address.name %></strong>                      <% if (address.isDefault) { %>                      <span class="badge bg-dark float-end">Default</span>                      <% } %>                      <p class="mb-1">                        <%= address.address %>                      </p>                      <p class="mb-1">                        <%= address.city %>, <%=                                                    address.state %> - <%=                                                    address.pincode %>                      </p>                      <p class="mb-0">                        Mobile: <%= address.mobile                                                    %>                      </p>                    </label>                  </div>                </div>              </div>              <% }); %>            </div>            <div class="d-flex justify-content-between mt-4">              <a href="/profile/addresses/add?returnTo=checkout" class="btn btn-outline">Add New Address</a>              <button type="submit" class="btn btn-checkout">                Continue to Payment              </button>            </div>          </form>          <% } else { %>          <div class="text-center py-5">            <p>You don't have any saved addresses.</p>            <a href="/profile/addresses/add?returnTo=checkout" class="btn btn-checkout">Add New Address</a>          </div>          <% } %>        </div>      </div>      <div class="col-lg-4">        <div class="order-summary">          <div class="order-summary-header">            <h5 class="order-summary-title">ORDER SUMMARY</h5>          </div>          <div class="order-summary-content">            <% if (cart && cart.products) { %>                <% cart.products.forEach(item => { %>            <div class="order-item">              <% const variant = item.product.variants.find(v=> v.size === item.size);                 const mainImage = item.product.images.find(img => img.isMain) || item.product.images[0]; %>              <div class="order-item-image">                <img src="<%= mainImage ? mainImage.thumbnail : '/images/placeholder.jpg' %>" alt="<%= item.product.name %>" />              </div>              <div class="order-item-details">                <div class="order-item-title">                  <%= item.product.name %>                </div>                <div class="order-item-meta">                  Qty: <%= item.quantity %> | Size: <%= item.size %>                </div>              </div>              <div class="order-item-price">                <% if (variant) { %> <% if (variant.varientPrice !== variant.salePrice){ %>                <div class="price-original">                  ₹<%= variant.varientPrice %>                </div>                <div class="price-final">                  ₹<%= variant.salePrice %>                </div>                <% } else { %>                <div class="price-final">                  ₹<%= variant.salePrice %>                </div>                <% } %> <% } %>              </div>            </div>            <% }); %>            <div class="order-summary-row">              <span>Subtotal:</span>              <span id="subtotal-value">₹<%= totals.subtotal.toFixed(2) %></span>            </div>            <div class="order-summary-row">              <span>Discount:</span>              <span class="discount-text" id="discount-value">-₹<%= totals.discount.toFixed(2) %></span>            </div>            <div class="coupon-section">              <div class="coupon-input-wrapper">                <input type="text" id="couponCode" class="coupon-input" placeholder="Enter Coupon Code">                <button type="button" id="applyCouponBtn" class="coupon-button">APPLY</button>              </div>              <div class="view-coupons-link">                <a href="javascript:void(0)" id="viewAvailableCoupons">View Available Coupons</a>              </div>              <div id="appliedCouponInfo" class="applied-coupon-info" style="display: none;">                <div class="applied-coupon-details">                  <span id="appliedCouponCode" class="applied-coupon-code"></span>                  <span id="appliedCouponDiscount" class="applied-coupon-discount"></span>                </div>                <button type="button" id="removeCouponBtn" class="remove-coupon-btn">                  <i class="bi bi-x"></i>                </button>              </div>            </div>            <div id="couponDiscountRow" class="order-summary-row" style="display: none;">              <span>Coupon Discount:</span>              <span id="couponDiscountValue" class="discount-text">-₹0.00</span>            </div>            <div class="order-summary-row">              <span>Shipping:</span>              <% if (totals.shipping === 0) { %>              <span class="discount-text" id="shipping-value">Free</span>              <% } else { %>              <span id="shipping-value">₹<%= totals.shipping.toFixed(2) %></span>              <% } %>            </div>            <div class="order-summary-row total">              <span>Total:</span>              <span id="finalAmount">₹<%= totals.finalAmount %></span>            </div>            <% } %>          </div>        </div>          </div>        </div>      </div>    </div>  </main>  <div class="modal fade" id="couponsModal" tabindex="-1" aria-labelledby="couponsModalLabel" aria-hidden="true">    <div class="modal-dialog modal-dialog-centered">      <div class="modal-content">        <div class="modal-header">          <h5 class="modal-title" id="couponsModalLabel">Available Coupons</h5>          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>        </div>        <div class="modal-body" id="availableCouponsContainer">          <div class="loading-coupons">            <div class="spinner-border text-primary" role="status">              <span class="visually-hidden">Loading...</span>            </div>            <p>Loading available coupons...</p>          </div>        </div>      </div>    </div>  </div>  <%- include('../partials/footer') %>  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>  <script src="/js/header.js"></script>  <script src="/js/toast-notification.js"></script>  <script src="/js/checkout-coupon.js"></script>  <script>    document.addEventListener("DOMContentLoaded", function() {      const addressCards = document.querySelectorAll(".address-card");      addressCards.forEach((card) => {        card.addEventListener("click", function() {          const radio = this.querySelector('input[type="radio"]');          if (radio) {            radio.checked = true;            addressCards.forEach((c) =>              c.classList.remove("selected")            );            this.classList.add("selected");          }        });      });    });  </script></body></html>