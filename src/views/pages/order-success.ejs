<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Order Successful - WEARIT</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="/css/header.css" />
  <link rel="stylesheet" href="/css/footer.css" />
  <link rel="stylesheet" href="/css/order-flow.css" />
</head>
<body>
  <%- include('../partials/header') %>
  
  <div class="order-flow-container">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <div class="order-flow-card">
          <div class="order-flow-header">
            <div class="status-icon success">
              <i class="bi bi-check-circle-fill"></i>
            </div>
            <h1 class="order-flow-title">Order Placed Successfully!</h1>
            <p class="order-flow-subtitle">Thank you for your purchase. Your order has been received and is being processed.</p>
          </div>
          
          <div class="order-details-card">
            <h5 class="order-details-title">Order Details</h5>
            
            <div class="order-detail-row">
              <span class="order-detail-label">Order ID:</span>
              <span class="order-detail-value"><%= order.orderID %></span>
            </div>
            
            <div class="order-detail-row">
              <span class="order-detail-label">Order Date:</span>
              <span class="order-detail-value"><%= new Date(order.orderDate).toLocaleString() %></span>
            </div>
            
            <div class="order-detail-row">
              <span class="order-detail-label">Total Amount:</span>
              <span class="order-detail-value">â‚¹<%= order.finalAmount.toFixed(2) %></span>
            </div>
            
            <div class="order-detail-row">
              <span class="order-detail-label">Payment Method:</span>
              <span class="order-detail-value">
                <% if (order.paymentMethod === 'COD') { %>
                  Cash on Delivery
                <% } else if (order.paymentMethod === 'paypal') { %>
                  PayPal
                <% } else if (order.paymentMethod === 'wallet') { %>
                  Wallet Payment
                <% } else { %>
                  <%= order.paymentMethod.charAt(0).toUpperCase() + order.paymentMethod.slice(1) %>
                <% } %>
              </span>
            </div>
            
            <% if (order.paymentMethod === 'paypal' && order.paymentStatus === 'completed') { %>
            <div class="order-detail-row">
              <span class="order-detail-label">Payment Status:</span>
              <span class="order-detail-value text-success">Paid</span>
            </div>
            
            <div class="order-detail-row">
              <span class="order-detail-label">Transaction ID:</span>
              <span class="order-detail-value"><%= order.paymentDetails && order.paymentDetails.transactionId ? order.paymentDetails.transactionId : 'N/A' %></span>
            </div>
            <% } else if (order.paymentMethod === 'wallet' && order.paymentStatus === 'completed') { %>
            <div class="order-detail-row">
              <span class="order-detail-label">Payment Status:</span>
              <span class="order-detail-value text-success">Paid from Wallet</span>
            </div>
            <% } else if (order.paymentMethod === 'COD') { %>
            <div class="order-detail-row">
              <span class="order-detail-label">Payment Status:</span>
              <span class="order-detail-value text-info">Cash on Delivery</span>
            </div>
            <% } %>
          </div>
          
          <div class="alert alert-info">
            <i class="bi bi-info-circle me-2"></i>
            <% if (order.paymentMethod === 'COD') { %>
              You've chosen Cash on Delivery. Please have the exact amount ready when your order arrives.
            <% } else if (order.paymentMethod === 'paypal' && order.paymentStatus === 'completed') { %>
              Your payment has been processed successfully. We'll send you an email with your order details.
            <% } else if (order.paymentMethod === 'wallet' && order.paymentStatus === 'completed') { %>
              Payment has been deducted from your wallet balance. We'll send you an email with your order details.
            <% } %>
          </div>
          
          <div class="action-buttons">
            <a href="/orders/details/<%= order._id %>" class="btn btn-primary">
              <i class="bi bi-file-text me-2"></i> View Order Details
            </a>
            <a href="/products" class="btn btn-outline-primary">
              <i class="bi bi-bag me-2"></i> Continue Shopping
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <%- include('../partials/footer') %>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</body>
</html>
